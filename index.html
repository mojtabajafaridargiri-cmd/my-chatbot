<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ú†Øªâ€ŒØ¨Ø§Øª</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>ðŸ’¬ Ú†Øªâ€ŒØ¨Ø§Øª Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</h2>
  <div id="chatbot">
    <div id="messages"></div>
    <input id="chatInput" type="text" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ ØªØ§ÛŒÙ¾ Ú©Ù†ÛŒØ¯..." />
  </div>

  <script>
    const apiURL = "/api/ai";

    async function askAI(text){
      const res = await fetch(apiURL, {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({ message: text })
      });
      const json = await res.json();
      return json?.candidates?.[0]?.content?.parts?.[0]?.text || "Ù¾Ø§Ø³Ø®ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯";
    }

    document.getElementById("chatInput").addEventListener("keypress", async (e)=>{
      if(e.key === "Enter"){
        const box = document.getElementById("messages");
        const msg = e.target.value;
        e.target.value = "";
        box.innerHTML += `<div><b>Ø´Ù…Ø§:</b> ${msg}</div>`;
        const reply = await askAI(msg);
        box.innerHTML += `<div style="color:blue;"><b>ðŸ’¬ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ:</b> ${reply}</div>`;
        box.scrollTop = box.scrollHeight;
      }
    });
  </script>
</body>
</html>
